<h2>List of ratings</h2>

<p> 
  Number of ratings: <%= @ratings.count %>
</p>

<div>
<h3>Top Beers</h3>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Beer</th>
      <th>Average</th>
      <th>Ratings</th>
    </tr>
  </thead>
  <tbody>
    <% @best_beers.each do |beer| %>
      <tr>
        <td><%= link_to beer.name, beer %></td>
        <td><%= beer.average_rating.round(2) %></td>
        <td><%= beer.ratings.count %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>

<div>
<h3>Top Breweries</h3>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Breweries</th>
      <th>Average</th>
      <th>Ratings</th>
    </tr>
  </thead>
  <tbody>
    <% @best_breweries.each do |brewery| %>
      <tr>
        <td><%= link_to brewery.name, brewery %></td>
        <td><%= brewery.average_rating.round(2) %></td>
        <td><%= brewery.ratings.count %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>

<div>
<h3>Top Raters</h3>
<div id="top-raters">
  <list>
    <% @top_raters.each do |user| %>
      <li>
        <%= link_to user.username, user %> - <%= user.ratings.count %> ratings
      </li>
    <% end %>
</div>
</div>

<div>
<h3>Recent Ratings</h3>
<div id="ratings-table">
  <%= render partial: 'ratings_table', locals: { recent_ratings: @recent_ratings } %>
</div>

<%= link_to (params[:show_all] == 'true' ? 'Hide Ratings' : 'Show All Ratings'), 
            ratings_path(show_all: !(params[:show_all] == 'true')), 
            class: 'btn btn-primary' %>
</div>

<p>
  <%= link_to( "New rating", new_rating_path, class: 'btn btn-primary' ) if current_user%>
</p>


